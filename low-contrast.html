<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Test - Low Contrast</title>
    <style>
        body {
            background: linear-gradient(135deg, #B3E5FC, #81D4FA);
            color: #FFF9C4;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .header {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #5D4037;
        }
        .container {
            max-width: 700px;
            margin: 2rem auto;
            background-color: rgba(255, 255, 255, 0.15);
            padding: 2.5rem;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .reading-content {
            font-size: 18px;
            line-height: 1.8;
            text-align: justify;
        }
        .reading-content p {
            margin-bottom: 1.5rem;
        }
        .timer-container {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.8);
            color: #5D4037;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            min-width: 120px;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        #timer {
            font-size: 24px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        button {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            margin-top: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4);
        }
        .progress-bar {
            width: 100%;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #FF9800, #FFB74D);
            width: 0%;
            transition: width 0.3s ease;
        }
        .difficulty-warning {
            background-color: rgba(255, 152, 0, 0.2);
            border: 1px solid #FF9800;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <div id="participantInfo">Participant: Loading...</div>
        <div id="contrastInfo">Condition: Low Contrast</div>
    </div>
    
    <div class="timer-container">
        <div>Reading Time:</div>
        <div id="timer">00:00</div>
        <div>seconds</div>
    </div>

    <div class="container">
        <h1>üìñ Reading Comprehension Test</h1>
        
        <div class="difficulty-warning">
            <strong>‚ö†Ô∏è Note:</strong> You are in the Low Contrast condition. This may affect readability.
        </div>
        
        <p>Please read the following text at your normal reading pace. When you finish, click the "I'm Done Reading" button.</p>
        
        <div class="progress-bar">
            <div class="progress" id="readingProgress"></div>
        </div>
        
        <div class="reading-content" id="reading-content">
            <p>The monarch butterfly is one of the most recognizable and extensively studied species in North America. Known for their spectacular annual migration, millions of monarchs travel from the United States and Canada to overwintering sites in the mountains of central Mexico. This incredible journey can cover distances up to 3,000 miles and involves multiple generations of butterflies, with no single individual completing the entire round trip.</p>
            
            <p>Monarchs undergo a complete metamorphosis with four distinct life stages: egg, larva (caterpillar), pupa (chrysalis), and adult butterfly. The entire life cycle takes about 30 days to complete under optimal conditions. Female monarchs lay their eggs exclusively on milkweed plants, which provide essential nutrients and chemical protection for the developing caterpillars. This specialized relationship makes monarchs entirely dependent on milkweed for their survival.</p>
            
            <p>Conservation efforts for monarch butterflies have become increasingly important due to significant habitat loss, climate change impacts, and reduced availability of milkweed plants. Protecting existing milkweed habitats, planting new milkweed corridors, and reducing pesticide use in critical areas are crucial steps being taken to ensure the survival of this remarkable species for future generations. Recent citizen science initiatives have also played a vital role in tracking migration patterns and population trends.</p>
        </div>
        
        <button onclick="finishReading()">‚úÖ I'm Done Reading</button>
    </div>

    <script>
        let startTime = Date.now();
        let timerInterval;
        const totalWords = 218; // Word count of the text
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            const participantId = sessionStorage.getItem('participantId') || 'Unknown';
            document.getElementById('participantInfo').textContent = `Participant: ${participantId}`;
            
            // Start timer
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);
            
            // Track reading progress
            trackReadingProgress();
        });
        
        function updateTimer() {
            const currentTime = Date.now();
            const elapsedSeconds = Math.floor((currentTime - startTime) / 1000);
            const minutes = Math.floor(elapsedSeconds / 60);
            const seconds = elapsedSeconds % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function trackReadingProgress() {
            const progressInterval = setInterval(() => {
                const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);
                const progress = Math.min((elapsedSeconds / 120) * 100, 100);
                document.getElementById('readingProgress').style.width = progress + '%';
            }, 1000);
        }
        
        function finishReading() {
            const endTime = Date.now();
            const readingTime = Math.floor((endTime - startTime) / 1000);
            clearInterval(timerInterval);
            
            // Calculate words per minute
            const wpm = Math.floor((totalWords / readingTime) * 60);
            
            // Store results
            sessionStorage.setItem('readingTime', readingTime);
            sessionStorage.setItem('wordsPerMinute', wpm);
            sessionStorage.setItem('completionTime', new Date().toISOString());
            
            // Redirect to quiz
            window.location.href = `quiz.html?contrast=low&time=${readingTime}&wpm=${wpm}`;
        }
        
        // Prevent accidental navigation
        window.addEventListener('beforeunload', function (e) {
            if (!window.location.href.includes('quiz.html')) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>